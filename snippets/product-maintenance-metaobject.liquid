{% comment %}
  Product Maintenance Schedule Snippet - Displays maintenance info from Maintenance Schedule metaobjects

  Usage: {% render 'product-maintenance-metaobject', product: product %}

  Requires: Product metafield linking to Maintenance Schedule metaobject
  Metafield: product.metafields.custom.maintenance_schedule (metaobject reference)

  Fields used:
  - aed_model
  - pad_replacement_years
  - battery_replacement_years
  - self_test_frequency
  - daily_checklist
  - monthly_checklist
  - replacement_pads_product
  - replacement_battery_product
  - maintenance_tips
{% endcomment %}

{% assign maintenance = product.metafields.custom.maintenance_schedule.value %}

{% if maintenance %}
<div class="product-maintenance-mo">
  <h3 class="product-maintenance-mo__title">
    {% if maintenance.aed_model != blank %}
      Maintenance for {{ maintenance.aed_model }}
    {% else %}
      {{ title | default: 'Maintenance Schedule' }}
    {% endif %}
  </h3>

  <div class="product-maintenance-mo__grid">
    {% if maintenance.pad_replacement_years != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <path d="M8 12h8"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Electrode Pads</h4>
          <p>Replace every {{ maintenance.pad_replacement_years }}</p>
          {% if maintenance.replacement_pads_product != blank %}
            <a href="{{ maintenance.replacement_pads_product.url }}" class="product-maintenance-mo__link">Shop Replacement Pads →</a>
          {% endif %}
        </div>
      </div>
    {% endif %}

    {% if maintenance.battery_replacement_years != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="1" y="6" width="18" height="12" rx="2"/>
            <line x1="23" y1="10" x2="23" y2="14"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Battery</h4>
          <p>Replace every {{ maintenance.battery_replacement_years }}</p>
          {% if maintenance.replacement_battery_product != blank %}
            <a href="{{ maintenance.replacement_battery_product.url }}" class="product-maintenance-mo__link">Shop Replacement Battery →</a>
          {% endif %}
        </div>
      </div>
    {% endif %}

    {% if maintenance.self_test_frequency != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Self-Test</h4>
          <p>{{ maintenance.self_test_frequency }}</p>
        </div>
      </div>
    {% endif %}
  </div>

  {% if maintenance.daily_checklist != blank %}
    <div class="product-maintenance-mo__checklist">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        Daily Checklist
      </h4>
      <div class="product-maintenance-mo__checklist-content rte">
        {{ maintenance.daily_checklist }}
      </div>
    </div>
  {% endif %}

  {% if maintenance.monthly_checklist != blank %}
    <div class="product-maintenance-mo__checklist">
      <h4>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        Monthly Checklist
      </h4>
      <div class="product-maintenance-mo__checklist-content rte">
        {{ maintenance.monthly_checklist }}
      </div>
    </div>
  {% endif %}

  {% if maintenance.maintenance_tips != blank %}
    <div class="product-maintenance-mo__tips">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
      </svg>
      <div class="product-maintenance-mo__tips-content rte">
        {{ maintenance.maintenance_tips }}
      </div>
    </div>
  {% endif %}
</div>

<style>
.product-maintenance-mo__title {
  font-size: 1.25rem;
  margin: 0 0 20px;
}
.product-maintenance-mo__grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}
@media (max-width: 600px) {
  .product-maintenance-mo__grid {
    grid-template-columns: 1fr;
  }
}
.product-maintenance-mo__item {
  display: flex;
  gap: 15px;
  padding: 15px;
  background: var(--color-bg-alt);
  border-radius: 8px;
}
.product-maintenance-mo__icon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  border-radius: 8px;
  color: var(--color-primary);
}
.product-maintenance-mo__info h4 {
  margin: 0 0 4px;
  font-size: 0.9375rem;
  font-weight: 600;
}
.product-maintenance-mo__info p {
  margin: 0;
  font-size: 0.875rem;
  color: var(--color-text-light);
}
.product-maintenance-mo__link {
  display: inline-block;
  margin-top: 8px;
  font-size: 0.8125rem;
  color: var(--color-primary);
  font-weight: 500;
  text-decoration: none;
}
.product-maintenance-mo__link:hover {
  text-decoration: underline;
}
.product-maintenance-mo__checklist {
  margin-top: 25px;
  padding: 20px;
  background: var(--color-bg-alt);
  border-radius: 8px;
}
.product-maintenance-mo__checklist h4 {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0 0 15px;
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text);
}
.product-maintenance-mo__checklist h4 svg {
  color: var(--color-primary);
}
.product-maintenance-mo__checklist-content {
  font-size: 0.9375rem;
  line-height: 1.6;
  color: var(--color-text-light);
}
.product-maintenance-mo__checklist-content ul {
  margin: 0;
  padding-left: 20px;
}
.product-maintenance-mo__checklist-content li {
  margin-bottom: 8px;
}
.product-maintenance-mo__checklist-content p {
  margin: 0 0 10px;
}
.product-maintenance-mo__checklist-content p:last-child {
  margin-bottom: 0;
}
.product-maintenance-mo__tips {
  display: flex;
  gap: 12px;
  margin-top: 20px;
  padding: 15px;
  background: #e8f5e9;
  border-radius: 6px;
  border-left: 4px solid #4caf50;
}
.product-maintenance-mo__tips svg {
  flex-shrink: 0;
  color: #4caf50;
}
.product-maintenance-mo__tips-content {
  font-size: 0.9375rem;
  line-height: 1.5;
}
.product-maintenance-mo__tips-content p {
  margin: 0 0 8px;
}
.product-maintenance-mo__tips-content p:last-child {
  margin-bottom: 0;
}
</style>
{% endif %}
