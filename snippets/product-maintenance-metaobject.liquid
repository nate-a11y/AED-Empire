{% comment %}
  Product Maintenance Schedule Snippet - Displays maintenance info from Maintenance Schedule metaobjects

  Usage: {% render 'product-maintenance-metaobject', product: product %}

  Requires: Product metafield linking to Maintenance Schedule metaobject
  Metafield: product.metafields.custom.maintenance_schedule (metaobject reference)
{% endcomment %}

{% assign maintenance = product.metafields.custom.maintenance_schedule.value %}

{% if maintenance %}
<div class="product-maintenance-mo">
  <h3 class="product-maintenance-mo__title">{{ title | default: 'Maintenance Schedule' }}</h3>

  <div class="product-maintenance-mo__grid">
    {% if maintenance.pad_replacement != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <path d="M8 12h8"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Electrode Pads</h4>
          <p>Replace every {{ maintenance.pad_replacement }}</p>
          {% if maintenance.pad_cost != blank %}
            <span class="product-maintenance-mo__cost">~{{ maintenance.pad_cost | money }}</span>
          {% endif %}
        </div>
      </div>
    {% endif %}

    {% if maintenance.battery_replacement != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="1" y="6" width="18" height="12" rx="2"/>
            <line x1="23" y1="10" x2="23" y2="14"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Battery</h4>
          <p>Replace every {{ maintenance.battery_replacement }}</p>
          {% if maintenance.battery_cost != blank %}
            <span class="product-maintenance-mo__cost">~{{ maintenance.battery_cost | money }}</span>
          {% endif %}
        </div>
      </div>
    {% endif %}

    {% if maintenance.self_test != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Self-Test</h4>
          <p>{{ maintenance.self_test }}</p>
        </div>
      </div>
    {% endif %}

    {% if maintenance.inspection_frequency != blank %}
      <div class="product-maintenance-mo__item">
        <div class="product-maintenance-mo__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
        </div>
        <div class="product-maintenance-mo__info">
          <h4>Visual Inspection</h4>
          <p>{{ maintenance.inspection_frequency }}</p>
        </div>
      </div>
    {% endif %}
  </div>

  {% if maintenance.notes != blank %}
    <div class="product-maintenance-mo__notes">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
      </svg>
      <p>{{ maintenance.notes }}</p>
    </div>
  {% endif %}
</div>

<style>
.product-maintenance-mo__title {
  font-size: 1.25rem;
  margin: 0 0 20px;
}
.product-maintenance-mo__grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}
@media (max-width: 600px) {
  .product-maintenance-mo__grid {
    grid-template-columns: 1fr;
  }
}
.product-maintenance-mo__item {
  display: flex;
  gap: 15px;
  padding: 15px;
  background: var(--color-bg-alt);
  border-radius: 8px;
}
.product-maintenance-mo__icon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  border-radius: 8px;
  color: var(--color-primary);
}
.product-maintenance-mo__info h4 {
  margin: 0 0 4px;
  font-size: 0.9375rem;
  font-weight: 600;
}
.product-maintenance-mo__info p {
  margin: 0;
  font-size: 0.875rem;
  color: var(--color-text-light);
}
.product-maintenance-mo__cost {
  display: inline-block;
  margin-top: 5px;
  font-size: 0.8125rem;
  color: var(--color-primary);
  font-weight: 500;
}
.product-maintenance-mo__notes {
  display: flex;
  gap: 12px;
  margin-top: 20px;
  padding: 15px;
  background: #e8f5e9;
  border-radius: 6px;
  border-left: 4px solid #4caf50;
}
.product-maintenance-mo__notes svg {
  flex-shrink: 0;
  color: #4caf50;
}
.product-maintenance-mo__notes p {
  margin: 0;
  font-size: 0.9375rem;
  line-height: 1.5;
}
</style>
{% endif %}
