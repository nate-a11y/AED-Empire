{% comment %}
  Product Card Snippet
  Usage: {% render 'product-card', product: product, show_quick_view: true %}
{% endcomment %}

<div class="product-card" data-product-card data-product-id="{{ product.id }}" data-vendor="{{ product.vendor | handleize }}" data-price="{{ product.price }}">
  {% if product.compare_at_price > product.price %}
    <span class="product-card__badge product-card__badge--sale">Sale</span>
  {% elsif product.available == false %}
    <span class="product-card__badge product-card__badge--soldout">Sold Out</span>
  {% elsif product.tags contains 'new' %}
    <span class="product-card__badge product-card__badge--new">New</span>
  {% endif %}
  
  <div class="product-card__image">
    <a href="{{ product.url }}">
      {% if product.featured_image %}
        <img src="{{ product.featured_image | image_url: width: 600 }}" 
             alt="{{ product.featured_image.alt | default: product.title }}"
             width="300" height="300" loading="lazy">
        {% if product.images.size > 1 and settings.product_card_hover_image %}
          <img src="{{ product.images[1] | image_url: width: 600 }}" 
               alt="{{ product.title }}"
               class="product-card__image-hover"
               width="300" height="300" loading="lazy">
        {% endif %}
      {% else %}
        {{ 'product-1' | placeholder_svg_tag }}
      {% endif %}
    </a>
    
    {% if show_quick_view %}
      <button class="product-card__quick-view" data-quick-view="{{ product.handle }}" aria-label="Quick view {{ product.title }}">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
        Quick View
      </button>
    {% endif %}
  </div>
  
  <div class="product-card__content">
    {% if settings.product_card_show_vendor and product.vendor %}
      <p class="product-card__vendor">{{ product.vendor }}</p>
    {% endif %}
    
    <h3 class="product-card__title">
      <a href="{{ product.url }}">{{ product.title }}</a>
    </h3>
    
    <p class="product-card__price">
      <span class="product-card__price-current">{{ product.price | money }}</span>
      {% if product.compare_at_price > product.price %}
        <span class="product-card__price-compare">{{ product.compare_at_price | money }}</span>
      {% endif %}
    </p>
    
    {% if settings.product_card_show_rating %}
      <div class="product-card__rating" data-rating-placeholder>
        <!-- Rating populated by app/JS -->
      </div>
    {% endif %}
    
    <div class="product-card__actions">
      {% if product.available %}
        {% if product.variants.size == 1 %}
          <form action="/cart/add" method="post" class="product-card__form">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <button type="submit" class="btn btn--primary btn--small btn--full">Add to Cart</button>
          </form>
        {% else %}
          <a href="{{ product.url }}" class="btn btn--primary btn--small btn--full">Select Options</a>
        {% endif %}
      {% else %}
        <button class="btn btn--outline btn--small btn--full" disabled>Sold Out</button>
      {% endif %}
    </div>
  </div>
</div>
