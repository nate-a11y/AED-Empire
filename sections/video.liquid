<section class="section{% if section.settings.alt_bg %} section--alt{% endif %}">
  <div class="container" style="max-width:{{ section.settings.width }}px">
    {% if section.settings.title != blank %}
      <div class="section-header">
        <h2>{{ section.settings.title }}</h2>
        {% if section.settings.subtitle %}<p>{{ section.settings.subtitle }}</p>{% endif %}
        <div class="section-header__divider"></div>
      </div>
    {% endif %}
    
    <div style="aspect-ratio:16/9;background:#000">
      {% if section.settings.video_url contains 'youtube' %}
        {% assign video_id = section.settings.video_url | split: 'v=' | last | split: '&' | first %}
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/{{ video_id }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
      {% elsif section.settings.video_url contains 'vimeo' %}
        {% assign video_id = section.settings.video_url | split: '/' | last %}
        <iframe width="100%" height="100%" src="https://player.vimeo.com/video/{{ video_id }}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe>
      {% else %}
        <p style="color:#fff;text-align:center;padding:40px">Add a YouTube or Vimeo URL</p>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Video",
  "settings": [
    {"type":"text","id":"title","label":"Heading"},
    {"type":"text","id":"subtitle","label":"Subtitle"},
    {"type":"text","id":"video_url","label":"YouTube or Vimeo URL","info":"Example: https://www.youtube.com/watch?v=xxxxx"},
    {"type":"range","id":"width","min":600,"max":1400,"step":50,"label":"Max width","default":1000},
    {"type":"checkbox","id":"alt_bg","label":"Alternate background","default":false}
  ],
  "presets": [{"name":"Video"}]
}
{% endschema %}
